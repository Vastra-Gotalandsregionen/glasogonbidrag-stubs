<?xml version="1.0" encoding="UTF-8" ?>

<f:view
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:bridge="http://liferay.com/faces/bridge"
        xmlns:portlet="http://java.sun.com/portlet_2_0"
        xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
>

    <h:form id="formPersonNumber" pt:data-focus_="true">

        <ui:fragment rendered="#{empty registerGrantBackingBean.grant.personNumber}">
            <div class="field-row">
                <div class="field-element inline">
                    <h:outputLabel for="personNumber" value="Personnummer:" />
                    <h:inputText id="personNumber" pt:placeholder="Skriv in personnummer..." value="#{registerGrantBackingBean.grant.personNumber}" pt:autofocus="true" pt:data-mask="true" pt:data-masktype="personnumber">
                        <f:ajax event="blur" listener="#{registerGrantBackingBean.personNumberChange}" render=":formPersonNumber :grantHistory" onevent="function(data) {focusOnAjaxCompleteTheme(data, '#{portletNamespace}:formPersonNumber:grantType')}"  />
                    </h:inputText>
                    <a href="#dummy-link"></a>
                </div>
            </div>
        </ui:fragment>
        <ui:fragment rendered="#{not empty registerGrantBackingBean.grant.personNumber and not empty registerGrantBackingBean.person}">
            <p>
                #{registerGrantBackingBean.grant.personNumber}
            </p>
        </ui:fragment>

        <ui:fragment rendered="#{not empty registerGrantBackingBean.person and empty registerGrantBackingBean.grant.grantType}">
            <div class="field-row">
                <div class="field-element inline">

                    <h:outputLabel for="grantType" value="Bidragstyp:" />

                    <h:selectOneMenu id="grantType" value="#{registerGrantBackingBean.grant.grantType}" pt:autofocus="true">
                        <f:selectItem itemValue="-1" itemLabel="" />
                        <f:selectItem itemValue="0" itemLabel="0-15" />
                        <f:selectItem itemValue="1" itemLabel="Ã–vriga" />
                        <f:ajax listener="#{registerGrantBackingBean.grantTypeChange}" render=":formPersonNumber" />
                    </h:selectOneMenu>
                </div>
            </div>
        </ui:fragment>

        <ui:fragment rendered="#{not empty registerGrantBackingBean.person and not empty registerGrantBackingBean.grant.grantType}">
            <p>
                Bidragstyp: #{registerGrantBackingBean.grant.grantType}
            </p>
        </ui:fragment>





    </h:form>


</f:view>
